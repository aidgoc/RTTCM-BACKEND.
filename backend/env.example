# Tower Dynamics Backend Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT=3001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# MongoDB connection string
MONGO_URI=mongodb://localhost:27017/cranefleet

# MongoDB authentication (required in production)
MONGO_USERNAME=
MONGO_PASSWORD=

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# JWT secret key (minimum 32 characters, use a strong random string)
JWT_SECRET=your-super-secure-jwt-secret-key-minimum-32-characters-long

# JWT token expiration time
JWT_EXPIRES_IN=24h

# =============================================================================
# MQTT CONFIGURATION
# =============================================================================
# MQTT broker URL
MQTT_BROKER_URL=mqtt://localhost:1883

# MQTT authentication (optional)
MQTT_USERNAME=
MQTT_PASSWORD=

# MQTT topic configuration
# Company-based topics (recommended for multi-tenant setup):
# Format: company/{companyId}/crane/{craneId}/telemetry
# Or simplified: {companyId}/crane/{craneId}/telemetry
# Examples:
#   - company/COMPANY1/crane/+/telemetry (all cranes for COMPANY1)
#   - COMPANY1/crane/+/telemetry (simplified format)
#   - company/+/crane/+/telemetry (all companies, all cranes)
#
# Legacy format (no company separation):
#   - crane/+/telemetry (all cranes, no company filtering)

TOPIC_TELEMETRY=company/+/crane/+/telemetry
TOPIC_STATUS=company/+/crane/+/status
TOPIC_LOCATION=company/+/crane/+/location
TOPIC_TEST=company/+/crane/+/test
TOPIC_ALARM=company/+/crane/+/alarm
TOPIC_HEARTBEAT=company/+/crane/+/heartbeat

# Alternative: Simplified company-based format
# TOPIC_TELEMETRY=+/crane/+/telemetry
# TOPIC_STATUS=+/crane/+/status
# TOPIC_LOCATION=+/crane/+/location
# TOPIC_TEST=+/crane/+/test
# TOPIC_ALARM=+/crane/+/alarm
# TOPIC_HEARTBEAT=+/crane/+/heartbeat

# 4G Modem format: IMEI/channel (e.g., 868019064209266/1)
# This wildcard subscribes to all IMEI-based topics
TOPIC_4G_MODEM=+/+

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000

# CORS origin URL
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Logging level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# BCrypt salt rounds (10-15, higher is more secure but slower)
BCRYPT_ROUNDS=12

# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
# Maximum file size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Backup directory path
BACKUP_DIR=/backups/mongodb

# Backup retention days
BACKUP_RETENTION_DAYS=7

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Health check timeout in milliseconds
HEALTH_CHECK_TIMEOUT=5000

# =============================================================================
# EMAIL CONFIGURATION (for alerts)
# =============================================================================
# SMTP configuration for email alerts
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=
ALERT_EMAIL=

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Sentry DSN for error tracking
SENTRY_DSN=

# =============================================================================
# REDIS CONFIGURATION (for caching)
# =============================================================================
# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis connection details
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Cache TTL settings (in seconds)
REDIS_TTL_DEFAULT=300
REDIS_TTL_CRANE=300
REDIS_TTL_USER=3600
REDIS_TTL_HEALTH=30
REDIS_TTL_SETTINGS=1800

# Enable/disable Redis caching
ENABLE_REDIS=true

# =============================================================================
# SSL CONFIGURATION
# =============================================================================
# SSL certificate paths (for HTTPS)
SSL_CERT_PATH=
SSL_KEY_PATH=

# =============================================================================
# API KEYS
# =============================================================================
# API key for external services
API_KEY=

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
ENABLE_METRICS=true
ENABLE_DEBUG=false
ENABLE_CORS=true
ENABLE_RATE_LIMITING=true
ENABLE_COMPRESSION=true
ENABLE_HELMET=true
ENABLE_LOGGING=true
ENABLE_MQTT=true
ENABLE_SOCKET_IO=true
ENABLE_HEALTH_CHECKS=true
ENABLE_GRACEFUL_SHUTDOWN=true

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and configure for production deployment

# NODE_ENV=production
# PORT=3001
# MONGO_URI=mongodb://username:password@mongodb:27017/cranefleet
# MONGO_USERNAME=your-mongo-username
# MONGO_PASSWORD=your-mongo-password
# JWT_SECRET=your-production-jwt-secret-key-very-long-and-secure
# MQTT_BROKER_URL=mqtts://your-mqtt-broker:8883
# FRONTEND_URL=https://your-domain.com
# CORS_ORIGIN=https://your-domain.com
# LOG_LEVEL=warn
# BCRYPT_ROUNDS=14
# RATE_LIMIT_MAX_REQUESTS=50
# SMTP_HOST=smtp.your-provider.com
# SMTP_USER=your-email@your-domain.com
# SMTP_PASS=your-email-password
# SMTP_FROM=noreply@your-domain.com
# ALERT_EMAIL=admin@your-domain.com
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SSL_CERT_PATH=/etc/ssl/certs/your-domain.crt
# SSL_KEY_PATH=/etc/ssl/private/your-domain.key